<!DOCTYPE html>
<html lang="da">
    <title>&nbsp;</title>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="res/style/themes/loevspring.css" />
        <link rel="stylesheet" href="res/style/themes/jquery.mobile.icons.min.css" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.0/jquery.mobile.structure-1.4.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.4.0/jquery.mobile-1.4.0.min.js"></script>
        <script type="text/javascript" charset="utf-8" src="res/js/cordova.js"></script>
        <script src="res/js/webservice.js"></script>
        <link rel="stylesheet" href="res/style/custom.css" />
    </head>
    <body>

<!--############### Page ################################-->
        <div data-role="page" id="pageFeedback">

            <!-- header -->
            <div data-role="header" data-position="fixed">
                <a href="menu.html" class="ui-btn-left ui-btn-corner-all ui-btn ui-icon-grid ui-btn-icon-notext ui-shadow" title=" Navigation " data-form="ui-icon" data-role="button" role="button"> Navigation </a>
                <h1>Løvspring - Feedback</h1>
            </div>

            <!-- /header -->

            <!-- content    -->
            <div data-role="content" id="divContentFeedback">
                <p>
                    <a href="#popupAddFeedback" data-rel="popup" class="ui-btn ui-corner-all" id="buttonAddFeedback">Tilføj</a>
                </p>
            </div>
<!--############### Page end ############################-->

<!--############### Popup add feedback ##################-->
        <div data-role="popup" id="popupAddFeedback">

            <!-- header -->
            <div data-role="header">
                <h1>Tilføj Feedback</h1>
            </div>
            <!-- /header -->

            <!-- content -->
            <div data-role="main" class="ui-content">
                <label for="name" >Name</label>
                <input type="text" id="name" placeholder="Navn"/><br/>
                <label for="email">Email</label>
                <input type="text" id="email" placeholder="Email"/><br/>
                <label for="feedback">Feedback</label>
                <textarea id="beskrivelse" placeholder="tekst"></textarea><br/>
                <input onclick="close()" type="button" value="Gem" id="btnSaveFeedback">
            </div>
            <!-- /content    -->

            <!-- footer -->
            <div data-role="footer">
                <h1></h1>
            </div>
            <!-- /footer -->

        </div>
<!--############### Popups end ##########################-->
        </div><!-- /page -->
    </body>
</html>
<script>
$( 'div' ).on( 'pageshow',function(event, ui){
    console.log( 'Page loaded!');
    callWebservice('method=getFeedback', 'feedbackCallBack');
});

function feedbackCallBack (data) {
    console.log(data);
    $.each(data.data, function(i, value){
        console.log(value.feedback);
        
        var OneFeedback = document.createElement('article');
        OneFeedback.className = "textWithBackground";
        OneFeedback.id = value.id + "article";
        document.getElementById("pageFeedback").appendChild(OneFeedback); 

        var OneFeedbackCenter = document.createElement('header');
        OneFeedbackCenter.id = value.id + "header";
        document.getElementById(value.id + "article").appendChild(OneFeedbackCenter);

        var OneFeedbackName = document.createElement('h1');
        OneFeedbackName.innerHTML = value.author;
        document.getElementById(value.id + "header").appendChild(OneFeedbackName);

        var OneFeedbackDate = document.createElement('p');
        OneFeedbackDate.innerHTML = value.date;
        document.getElementById(value.id + "header").appendChild(OneFeedbackDate);
        
        var OneFeedbackText = document.createElement('p');
        text = document.createTextNode(value.feedback);
        OneFeedbackText.appendChild(text);   
        document.getElementById(value.id + "article").appendChild(OneFeedbackText);
    });
    creatHTMLElements();
}

function creatHTMLElements (array) {
    console.log("createHTMLElements");
    // var array = array;
    // var OneFeedback = document.createElement('div');
    // OneFeedback.id = "user1";
    // var OneFeedbackCenter = document.createElement('center');
    // OneFeedbackCenter.id = "user1Center";
    // var OneFeedbackName = document.createElement('div');
    // OneFeedbackName.innerHTML = "hans";
    // var OneFeedbackDate = document.createElement('div');
    // OneFeedbackDate.innerHTML = "12321432432";
    // var OneFeedbackText = document.createElement('p');
    // OneFeedbackText.className = "textWithBackground";
    // text = document.createTextNode('it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages');
    // OneFeedbackText.appendChild(text);
    // document.getElementById("pageFeedback").appendChild(OneFeedback);    
    // document.getElementById("user1").appendChild(OneFeedbackCenter);
    // document.getElementById("user1Center").appendChild(OneFeedbackName);
    // document.getElementById("user1Center").appendChild(OneFeedbackDate);
    // document.getElementById("user1Center").appendChild(OneFeedbackText);
}

$("#btnSaveFeedback").click(function(){
    var id;
    var name;
    var date;
    var email;
    var feedback;
    
    $( "#popupAddFeedback" ).popup( "close" );
});

</script>
